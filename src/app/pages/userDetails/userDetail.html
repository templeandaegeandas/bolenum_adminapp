<div class="widgets">
  <div class="row">
    <div class="col-md-12 UserDetail">
      <ba-card cardTitle="User Details">
      <p-tabView (onChange)="onTabChange($event)">
        <p-tabPanel header="User Profile" style="padding:0px;">
          <div class="tab-inner">
            <div class="tab-inner1">
              <div class="row">
                <div class="col-md-12 actionBtn text-right">
                </div>
                <div class="col-md-6">
                  <div class="col-sm-10">
                    <div class="form-group">
                      <label for="inputFirstName">First Name</label>
                      <input class="form-control" id="inputFirstName" placeholder="First Name" type="text" [(ngModel)]="user.firstName" disabled>
                    </div>
                    <div class="form-group">
                      <label for="inputLastName">Last Name</label>
                      <input class="form-control" id="inputLastName" placeholder="Last Name" type="text" [(ngModel)]="user.lastName" disabled>
                    </div>
                    <div class="form-group">
                      <label for="inputEmailName">Email Address</label>
                      <input class="form-control" id="inputEmailName" placeholder="Email Address" type="text" [(ngModel)]="user.emailId" disabled>
                    </div>
                  </div>
                </div>
                <div class="col-md-6">
                  <div class="col-sm-10">
                    <div class="form-group">
                      <label for="inputMobileName">Mobile Number</label>
                      <input class="form-control" id="inputMobileName" placeholder="Mobile Number" type="text" [(ngModel)]="user.mobileNo" disabled>
                    </div>
                    <div class="form-group">
                      <label for="inputFaxName">Country</label>
                      <input class="form-control" id="inputFaxName" placeholder="City" type="text" [(ngModel)]="user.country" disabled>
                    </div>
                    <div class="form-group">
                      <label for="inputFaxName">City</label>
                      <input class="form-control" id="inputFaxName" placeholder="Country" type="text" [(ngModel)]="user.state" disabled>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </p-tabPanel>
        <p-tabPanel header="KYC">
          <div class="tab-inner">
            <div class="tab-inner1">
              <div class="row" *ngIf="kycListLength==0">
                <div class="col-md-12">
                  <p class="kyc-padding"> Kyc not uploaded yet!</p>
                </div>
              </div>
              <div class="row">
                <div class="col-md-6">
                  <div class="row" *ngIf="kycListLength!=0">
                    <div class="col-md-12">
                      <div class="row">
                        <div class="col-md-12">
                          <div class="col-sm-10">
                            <div class="col-md-12" style="height: 300px;width: 300px;">
                              <img *ngIf="!doc0Pdf"  [src]="document0" [imageZoom]="document0" [style.width.px]="327" [style.height.px]="300" />
                              <img *ngIf="doc0Pdf" src="assets/images/pdf-icon.png" class="pdf-Open" title="Click to open" (click)="openPdf0()" />
                            </div>
                          </div>
                        </div>
                        <div class="col-md-12">
                          <div class="col-sm-10 kyc-margin-top">
                            <div class="form-group">
                              <label for="inputFirstName">Document Status</label>
                              <input class="form-control" id="inputFirstName" placeholder="Document Status" type="text" [(ngModel)]="document0Status" disabled>
                            </div>
                            <div class="form-group">
                              <label for="inputMobileName">Document Type</label>
                              <input class="form-control" id="inputMobileName" placeholder="Name of Identity" type="text" [(ngModel)]="document0Type" disabled>
                            </div>
                          </div>
                          <div class="col-md-6 actionBtn text-center">
                            <button class="btn btn-primary btn-with-iconss" *ngIf="!document0VerificationStatus || document0Status=='SUBMITTED'" type="button" (click)="approve0Kyc()">Approve</button>
                            <button class="btn btn-primary btn-with-iconss" *ngIf="document0VerificationStatus || document0Status=='SUBMITTED'" type="button" (click)="addPopupOpen(document0Type)">DisApprove</button>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
                <div class="col-md-6">
                  <div class="row" *ngIf="kycListLength!=0">
                    <div class="col-md-12">
                      <div class="row">
                        <div class="col-md-12">
                          <div class="col-sm-10">
                            <div class="col-md-12" style="height: 300px;width: 300px;">
                              <img *ngIf="!doc1Pdf" [src]="document1" [imageZoom]="document1" [style.width.px]="327" [style.height.px]="300" />
                              <img *ngIf="doc1Pdf" class="pdf-Open" title="Click to open" src="assets/images/pdf-icon.png" (click)="openPdf1()" />
                            </div>
                          </div>
                        </div>
                        <div class="col-md-12">
                          <div class="col-sm-10 kyc-margin-top">
                            <div class="form-group">
                              <label for="inputFirstName">Document Status</label>
                              <input class="form-control" id="inputFirstName" placeholder="Document Status" type="text" [(ngModel)]="document1Status" disabled>
                            </div>
                            <div class="form-group">
                              <label for="inputMobileName">Document Type</label>
                              <input class="form-control" id="inputMobileName" placeholder="Name of Identity" type="text" [(ngModel)]="document1Type" disabled>
                            </div>
                          </div>
                          <div class="col-md-6 actionBtn text-center">
                            <button class="btn btn-primary btn-with-iconss" *ngIf="!document1VerificationStatus || document1Status=='SUBMITTED'" type="button" (click)="approve1Kyc()">Approve</button>
                            <button class="btn btn-primary btn-with-iconss" *ngIf="document1VerificationStatus || document1Status=='SUBMITTED'" type="button" (click)="addPopupOpen(document1Type)">DisApprove</button>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </p-tabPanel>
        <p-tabPanel header="Open Orders">
          <div class="tab-inner">
            <div class="tab-inner1">
              <div class="row">
                <div class="col-md-12 ">
                  <div class="panel panel-default">
                    <table class="table table-striped">
                      <thead>
                        <tr>
                          <th style="width: 20%">Type</th>
                          <th style="width: 20%">Price</th>
                          <th style="width: 20%">Amount</th>
                          <th style="width: 20%">Total Price</th>
                          <th style="width: 20%">Date</th>
                        </tr>
                      </thead>
                      <tbody>
                        <tr *ngFor="let orders of orderBook | paginate: { itemsPerPage: pageSize,
                          currentPage: currentPage,
                          totalItems: totalElements }">
                          <td><span *ngIf="orders.orderType=='BUY'" style=color:#2AD747>Buy</span>
                          <span *ngIf="orders.orderType=='SELL'" style=color:#DB2828>Sell</span></td>
                          <td>
                            <span *ngIf="orders.pairedCurrency.currencyAbbreviation=='NGN'">{{orders.price | number:'1.8-8'}} {{orders.pairedCurrency.currencyAbbreviation}}</span>
                            <span *ngIf="orders.pairedCurrency.currencyAbbreviation!='NGN'">{{orders.price | number:'1.8-8'}} {{orders.marketCurrency.currencyAbbreviation}}</span>
                          </td>
                          <td>
                            <span *ngIf="orders.pairedCurrency.currencyAbbreviation=='NGN'">{{orders.volume | number:'1.8-8'}} {{orders.marketCurrency.currencyAbbreviation}}</span>
                            <span *ngIf="orders.pairedCurrency.currencyAbbreviation!='NGN'">{{orders.volume | number:'1.8-8'}} {{orders.pairedCurrency.currencyAbbreviation}}</span>
                          </td>
                          <td>
                            <span *ngIf="orders.pairedCurrency.currencyAbbreviation=='NGN'">{{orders.price * orders.volume | number:'1.8-8'}} {{orders.pairedCurrency.currencyAbbreviation}}</span>
                            <span *ngIf="orders.pairedCurrency.currencyAbbreviation!='NGN'">{{orders.price * orders.volume | number:'1.8-8'}} {{orders.marketCurrency.currencyAbbreviation}}</span>
                          </td>
                          <td>{{orders.createdOn | date: 'MMM d, y h:mm a'}}</td>
                        </tr>
                      </tbody>
                      <tfoot>
                      <tr>
                        <td colspan="7">
                          <div class="pull-right show-entry-txt">Showing {{start}} to {{end}} of {{totalElements}} entries</div>
                        <pagination-controls (pageChange)="pageChanged($event)" maxSize="7" directionLinks="true" autoHide="true" previousLabel="Previous" nextLabel="Next" screenReaderPaginationLabel="Vishal" screenReaderPageLabel="Kumar" screenReaderCurrentLabel="Rajput"></pagination-controls>
                      </td>
                    </tr>
                    </tfoot>
                  </table>
                </div>
              </div>
            </div>
          </div>
        </div>
      </p-tabPanel>
      <p-tabPanel header="Trade History">
        <div class="tab-inner">
          <div class="tab-inner1">
            <div class="row">
              <div class="col-md-12 ">
                <div class="panel panel-default">
                  <table class="table table-striped">
                    <thead>
                      <tr>
                        <th style="width: 20%">Type</th>
                        <th style="width: 20%">Price</th>
                        <th style="width: 20%">Amount</th>
                        <th style="width: 20%">Total Price</th>
                        <th style="width: 20%">Date</th>
                      </tr>
                    </thead>
                    <tbody>
                      <tr *ngFor="let tx of tradeHistory | paginate: { itemsPerPage: pageSize,
                        currentPage: currentPage,
                        totalItems: totalElements }">
                        <td style=color:#2AD747>
                          <span *ngIf="tx.buyer.userId==userId" style=color:#2AD747>Buy</span>
                          <span *ngIf="tx.seller.userId==userId" style=color:#DB2828>Sell</span>
                        </td>
                        <td>
                          <span *ngIf="tx.pairedCurrency.currencyAbbreviation=='NGN'">{{tx.price | number:'1.8-8'}} {{tx.pairedCurrency.currencyAbbreviation}}</span>
                          <span *ngIf="tx.pairedCurrency.currencyAbbreviation!='NGN'">{{tx.price | number:'1.8-8'}} {{tx.marketCurrency.currencyAbbreviation}}</span>
                        </td>
                        <td>
                          <span *ngIf="tx.pairedCurrency.currencyAbbreviation=='NGN'">{{tx.volume | number:'1.8-8'}} {{tx.marketCurrency.currencyAbbreviation}}</span>
                          <span *ngIf="tx.pairedCurrency.currencyAbbreviation!='NGN'">{{tx.volume | number:'1.8-8'}} {{tx.pairedCurrency.currencyAbbreviation}}</span>
                        </td>
                        <td>
                          <span *ngIf="tx.pairedCurrency.currencyAbbreviation=='NGN'">{{tx.price * tx.volume | number:'1.8-8'}} {{tx.pairedCurrency.currencyAbbreviation}}</span>
                          <span *ngIf="tx.pairedCurrency.currencyAbbreviation!='NGN'">{{tx.price * tx.volume | number:'1.8-8'}} {{tx.marketCurrency.currencyAbbreviation}}</span>
                        </td>
                        <td>
                          {{tx.createdOn | date: 'MMM d, y h:mm a'}}
                        </td>
                      </tr>
                    </tbody>
                    <tfoot>
                    <tr>
                      <td colspan="7">
                        <div class="pull-right show-entry-txt">Showing {{start}} to {{end}} of {{totalElements}} entries</div>
                      <pagination-controls (pageChange)="pageChangedTrade($event)" maxSize="7" directionLinks="true" autoHide="true" previousLabel="Previous" nextLabel="Next" screenReaderPaginationLabel="Vishal" screenReaderPageLabel="Kumar" screenReaderCurrentLabel="Rajput"></pagination-controls>
                    </td>
                  </tr>
                  </tfoot>
                </table>
              </div>
            </div>
          </div>
        </div>
      </div>
    </p-tabPanel>
    <p-tabPanel header="Bank Details" style="padding:0px;">
      <div class="tab-inner">
        <div class="tab-inner1">
          <div class="row" *ngIf="bankUserLength==0">
            <div class="col-md-12 "> 
              <p class="bank-padding"> Bank details not found !</p>
            </div>
          </div>
          <div class="row">
            <div class="col-md-12 actionBtn text-right">
            </div>
            <div class="col-md-6" *ngFor="let bankUser of bankCustomerDetails">
              <div class="col-sm-10">
                <div class="form-group">
                  <label for="inputBankName">Bank Name</label>
                  <input class="form-control" id="inputBankName" type="text" [(ngModel)]="bankUser.bankName" disabled>
                </div>
                <div class="form-group">
                  <label for="inputFirstName">Account Holder Name</label>
                  <input class="form-control" id="inputFirstName" type="text" [(ngModel)]="bankUser.accountHolderName" disabled>
                </div>
                <div class="form-group">
                  <label for="inputLastName">Account Number</label>
                  <input class="form-control" id="inputLastName" type="text" [(ngModel)]="bankUser.accountNumber" disabled>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </p-tabPanel>
  </p-tabView>
  </ba-card>
</div>
</div>
</div>
<div bsModal #addPopup="bs-modal" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="myLargeModalLabel" aria-hidden="true">
<div class="modal-dialog modal-lg">
<div class="modal-content">
  <div class="modal-header">
    <h4 class="modal-title pull-left">Are you sure? You want to disapprove this kyc.</h4>
    <button type="button" class="close pull-right" (click)="addPopupClose()" aria-label="Close">
    <span aria-hidden="true">&times;</span>
    </button>
  </div>
  <div class="modal-body">
    <form #disApproveKycForm="ngForm" (submit)="disApproveKyc(disApproveKycForm);">
      <div class="form-group">
        <label for="exampleTextarea">Enter Rejection Message</label>
        <textarea class="form-control" id="exampleTextarea" rows="3" [(ngModel)]="kycDisapprove.rejectionMessage" #rejectionMessage="ngModel" name="rejectionMessage" required></textarea>
        <span *ngIf="rejectionMessage.invalid && disApproveKycForm.submitted">
          <p class="text-danger" *ngIf="rejectionMessage.errors.required">Please enter rejection message</p>
        </span>
      </div>
      <div class="modal-footer">
        <button type="submit" class="btn  disaprove" data-dismiss="modal">Disapprove</button>
        <button type="reset" class="btn  cancelButton" data-dismiss="modal" (click)="addPopupClose()">Cancel</button>
      </div>
    </form>
  </div>
</div>
</div>
</div>
<ngx-loading [show]="loading" [config]="{fullScreenBackdrop: true}"></ngx-loading>